<div style="position:relative">


    <div class="bubble {{::toType(msg.contentType)}}" ng-class="{ me: msg.me, error: msg.error, emoji:isAllEmoji(msg.text) }" ng-style="{ opacity: (msg.pending? 0.5 : 1.0) }">

        <span ng-switch="::toType(msg.contentType)">
            <span ng-switch-when="image">
                <a ng-href="{{msg.text}}" target="pic">
                    <img ng-src="{{msg.text}}">
                </a>
            </span>
            <span ng-switch-when="video">
                <video controls>
                    <source ng-src="{{msg.text}}">
                </video>
            </span>
            <span ng-switch-default ng-bind-html="::toHtml(msg.text)"></span>
        </span>

    </div>
    <i ng-if="msg.pending" class="text-muted fa fa-spin fa-refresh pull-right" style="margin-top:15px"></i>
</div>
